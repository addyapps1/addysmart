import{r as t,A as y,j as e}from"./index-BDQ6Dlko.js";import{B as w}from"./BeatLoader-DzzBgMiY.js";const S=()=>{const{getStoredUserObj:o,API_base_url:f,getStoredToken:x}=t.useContext(y),[n,s]=t.useState(""),[i,h]=t.useState({}),[r,l]=t.useState(!1),[b,c]=t.useState(0),p=60,[d,m]=t.useState(!1);t.useEffect(()=>{h(o())},[o]);const j=async()=>{if(!r){try{m(!0),(await fetch(`${f}api/a/v1.00/users/resendverificationemail`,{method:"GET",headers:{"Content-Type":"application/json",authorization:`Bearer ${x()}`}})).ok?(s("A verification email has been sent!"),g()):s("Failed to resend email.")}catch{s("An error occurred while resending the email.")}finally{m(!1)}setTimeout(()=>{s("")},5e3)}},g=()=>{l(!0),c(p);const a=setInterval(()=>{c(u=>u<=1?(clearInterval(a),l(!1),0):u-1)},1e3);return()=>clearInterval(a)};return e.jsx(e.Fragment,{children:!i.emailVerified&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex justify-center items-center bg-black bg-opacity-70 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-md w-[90%] max-w-[900px] text-center shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Verify Your Email"}),e.jsxs("h2",{className:"mb-6 text-[var(--secondary-text-color)] text-2xl",children:["An email has been sent to your email: ",e.jsx("b",{children:i.email}),". ",e.jsx("br",{}),"Please verify your email to continue. ",e.jsx("br",{}),e.jsx("em",{className:"mb-6 text-[var(--secondary-text-color)] text-2xl w-full",children:"Click 'Resend Email' if you did not get the mail."})]}),e.jsx("button",{className:`px-4 py-2 bg-[var(--accent-color)] text-white rounded-md hover:bg-blue-700 transition duration-300 ${r?"opacity-50 cursor-not-allowed":""}`,onClick:j,disabled:r,children:d?e.jsx(w,{color:"#ffffff",loading:d,size:8}):r?`Wait ${b}s to Resend`:"Resend Email"}),n&&e.jsx("p",{className:"text-green-500 mt-4",children:n})]})})})};export{S as default};
