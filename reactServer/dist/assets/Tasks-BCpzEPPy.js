import{r as t,A as P,u as $,j as e}from"./index-kR-aReZW.js";import{M as L}from"./AddyMine-D2d0Guu5.js";import{T as _,W as A}from"./WatchcodeModal-DKTa-d-V.js";import{S as o}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{c as B}from"./line-md--menu-to-close-transition-CEm-3zyw.js";import{B as U}from"./BeatLoader-14DkuQDB.js";import{M as D}from"./MineHelmet-Dlyk2kUQ.js";import"./useClickOutside-DlfaV4Ao.js";import"./Helmet-CjJ5bfs9.js";const V=({videoId:c,isOpen:N,onClose:x})=>{const{logout:I,getStoredToken:C}=t.useContext(P),{API_MineBase_url:k,setTasks:M,setBalance:S}=t.useContext(L),[d,p]=t.useState(""),[n,l]=t.useState(""),[m,w]=t.useState(""),[i,j]=t.useState(""),[h,u]=t.useState(!1),E=$(),b=()=>!d.trim()||!n.trim()||!m.trim()||!i.trim()?(o.fire("all fiels cannot be empty"),!1):isNaN(+d.trim())||isNaN(+n.trim())||isNaN(+m.trim())||isNaN(+i.trim())?(o.fire("Values must be a number"),!1):!0,T=async s=>{if(s.preventDefault(),u(!0),!b()){u(!1);return}try{console.log("WatchcodeModal videoId",c);const r=await(await fetch(`${k()}api/a/v1.00/coinmining`,{method:"POST",headers:{"Content-Type":"application/json",authorization:`Bearer ${C()}`},body:JSON.stringify({watchcode1:d,watchcode2:n,watchcode3:m,watchcode4:i,videoId:c})})).json();if(console.log("data",r),r&&r.alreadydone)o.fire(`${r.alreadydone}`);else if(r&&r.data)o.fire(`${r.data.newCoins} shares mined successfully`),M(W=>{console.log("Previous tasks:",W);const y=W.map(g=>g._id===c?{...g,justViewed:!0}:g);return console.log("Updated tasks:",y),p(""),l(""),w(""),j(""),y}),S(r.data),x();else throw new Error("Invalid response data")}catch(f){console.error("Shares mining failed:",f),o.fire("Shares mining failed"),f=="Error: jwt expired"&&(o.fire("Your login expired, please login again."),I(),E("/"))}finally{u(!1)}};return e.jsx(e.Fragment,{children:N&&e.jsx("div",{id:"watchcodeModal",className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center max-h-[95vh] overflow-y-scroll z-[101] my-5",children:e.jsxs("div",{className:"bg-white dark:bg-black rounded-lg shadow-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:"Word Occurrence"}),e.jsx("div",{children:e.jsx("img",{src:B,alt:"profileImage",className:"pagelogo w-6 aspect-square rounded-full mx-auto",title:"close modal",onClick:x})})]}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsx("input",{type:"hidden",name:"video-id",value:c}),e.jsx("div",{children:e.jsx("textarea",{id:"watchcode1",name:"watchcode1",rows:"1",placeholder:"answer 1st challenge",value:d,onChange:s=>p(s.target.value),required:!0,className:" my-1 w-full p-3 text-[var(--secondary-text-color)] border border-gray-300 dark:border-gray-700 rounded focus:ring focus:ring-highlight-color transition duration-200 ease-in-out"})}),e.jsx("div",{children:e.jsx("textarea",{id:"watchcode2",name:"watchcode2",rows:"1",placeholder:"answer 2nd challenge",value:n,onChange:s=>l(s.target.value),required:!0,className:" my-1 w-full p-3 text-[var(--secondary-text-color)] border border-gray-300 dark:border-gray-700 rounded focus:ring focus:ring-highlight-color transition duration-200 ease-in-out"})}),e.jsx("div",{children:e.jsx("textarea",{id:"watchcode3",name:"watchcode3",rows:"1",placeholder:"answer 3rd challenge",value:m,onChange:s=>w(s.target.value),required:!0,className:"w-full p-3 text-[var(--secondary-text-color)] border border-gray-300 dark:border-gray-700 rounded focus:ring focus:ring-highlight-color transition duration-200 ease-in-out"})}),e.jsx("div",{children:e.jsx("textarea",{id:"watchcode4",name:"watchcode4",rows:"1",placeholder:"answer 4th challenge",value:i,onChange:s=>j(s.target.value),required:!0,className:" my-1 w-full p-3 text-[var(--secondary-text-color)] border border-gray-300 dark:border-gray-700 rounded focus:ring focus:ring-highlight-color transition duration-200 ease-in-out"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"bg-highlight-color hover:bg-secondary-accent-color text-white font-bold py-3 px-6 rounded-lg transition duration-200 ease-in-out",disabled:h,children:h?e.jsx(U,{color:"#ffffff",loading:h,size:8}):"Mine"})})]})]})})})},R="/assets/WatchCode1-C0W4JAKY.png",z="/assets/WatchCode2-CjMj37uB.png",Y="/assets/WatchCode3-C---t5Gb.png",F="/assets/WatchCode4-gcqbkyGR.png",ae=()=>{var y,g,q;const{logout:c,isLoggedIn:N,getStoredUserObj:x,getStoredToken:I,setPageTitle:C,APP_NAME:k}=t.useContext(P),{API_E_VideoBase_url:M,tasks:S,setTasks:d}=t.useContext(L),[p,n]=t.useState(!1),[l,m]=t.useState({}),[w,i]=t.useState(null),[j,h]=t.useState(!1),[u,E]=t.useState(""),b=$();t.useEffect(()=>{N()||b("/")},[N,b]),t.useEffect(()=>(C("TASKS"),()=>{}),[C]),t.useEffect(()=>{m(x())},[x]);const T=async()=>{n(!0);try{const a=`${M()}api/a/v1.00/evideo/tasks`,v=await(await fetch(a,{method:"GET",headers:{"Content-Type":"application/json",authorization:`Bearer ${I()}`}})).json();if(v.status==="success"&&v.data)console.log("tasksData.data",v.data),d(v.data);else throw new Error(v.message)}catch(a){console.log("error",a),a=="Error: jwt expired"&&(o.fire("Your login expired, please login again."),c(),b("/")),console.error("Request failed:",a)}finally{n(!1)}};t.useEffect(()=>{T()},[]);const s=(a,O)=>{i(a),E(O),h(!0),console.log("setIsModalOpen(true);",a)},f=()=>{h(!1),i(null)},r=a=>{a.preventDefault(),o.fire("Sorry, you have already completed this task within the last 24 hours.")},W=()=>{T()};return e.jsxs(e.Fragment,{children:[e.jsx(D,{pageDescription:`Welcome to ${k.toLowerCase()} mining tasks page where you see all your available tasks`,pageName:"addymine/tasks",pageTitle:`${k} - Mining tasks`}),e.jsx("section",{className:"flex justify-center items-center mx-6 mb-6 mt-10",children:e.jsx("div",{className:"cards-container flex max-w-[850px] flex-wrap w-full justify-center gap-6",children:e.jsxs("div",{className:"bg-[var(--container-bg-color)] w-full flex-grow min-h-16 flex-col flex justify-center items-center rounded-md",children:[e.jsxs("h1",{className:"w-full text-center mt-5 m-0 text-[var(--highlight-color)] text-2xl",children:[`${((y=l.userTitle)==null?void 0:y.toUpperCase())||"ff"} 
              ${((g=l.firstName)==null?void 0:g.toUpperCase())||"ff"} 
              ${((q=l.lastName)==null?void 0:q.toUpperCase())||"ff"}`,l.isVIP&&e.jsx("em",{className:"text-[var(--good)]",children:" (VIP)"})]}),e.jsx("p",{className:"w-full text-center m-2",children:e.jsx("b",{onClick:W,className:" text-white bg-[var(--accent-color)] p-1 px-2 rounded cursor-pointer",children:"Reload Task"})})]})})}),e.jsx("section",{className:"flex justify-center items-center mx-6 mb-14 mt-2",children:e.jsx("div",{className:"cards-container flex max-w-[850px] flex-wrap w-full justify-center gap-6",children:e.jsxs("div",{className:"bg-[var(--container-bg-color)] w-full flex-grow min-h-16 flex-col flex justify-center items-center rounded-md",children:[e.jsx("em",{className:"w-full text-left mt-5 m-0 p-4 text-[var(--highlight-color)] text-2xl",children:"Don’t forget to subscribe or follow, like, and share this video! Your engagement helps the algorithm recommend and show this video to more people, increasing the monetary value of our shares. The more people outside our community see this video, the more money we make together. Let’s spread the word and grow our success!"}),e.jsx("p",{className:"w-full text-center mb-2"})]})})}),e.jsx("section",{className:"flex flex-col justify-center items-center flex-wrap mx-6 mb-14",children:e.jsxs("div",{className:"cards-container bg-[var(--container-bg-color)] flex max-w-[850px] flex-wrap w-full justify-center rounded-md gap-6",children:[e.jsxs("div",{className:"basis-80 flex-grow flex gap-6 justify-center flex-wrap mb-6",children:[e.jsx("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md p-0 m-0",children:e.jsx("img",{src:R,alt:"WatchCodeImg1",className:" w-full aspect-square rounded-md p-1"})}),e.jsx("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md p-0 m-0",children:e.jsx("img",{src:z,alt:"WatchCodeImg2",className:" w-full aspect-square rounded-md p-1"})})]}),e.jsxs("div",{className:"basis-80 flex-grow flex gap-6 justify-center flex-wrap mb-6",children:[e.jsx("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md p-0 m-0",children:e.jsx("img",{src:Y,alt:"WatchCodeImg3",className:" w-full aspect-square rounded-md p-1"})}),e.jsx("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md p-0 m-0",children:e.jsx("img",{src:F,alt:"WatchCodeImg4",className:" w-full aspect-square rounded-md p-1"})})]}),e.jsxs("div",{className:" w-full m-0 p-2",children:[e.jsx("h2",{className:"text-[var(--highlight-color)] text-center font-bold text-lg mb-2",children:"NOTICE!"}),'The challenges are hidden within the videos. Look for boxes similar to those pointed out by arrows in the provided images above. Count how many times the word on the left side of the challenge box, which has a blue background, appears on the right side of the challenge box. Return to this page and provide your answer in the space provided. Use the input field that appears when you click on "Do Task" to enter your answer. Each task may include additional instructions, so be sure to read them carefully.']})]})}),p?e.jsx("div",{className:"flex justify-center items-center my-10",children:e.jsx(U,{color:"#ffffff",loading:p,size:8})}):S.length>0?S.map(a=>e.jsx("div",{className:"task-item",children:e.jsx(_,{task:a,alertViewed:r,onWatchCodeClick:()=>s(a._id,a.challengeType)})},a._id)):e.jsx("p",{className:"text-center my-10 text-[var(--highlight-color)]",children:"Sorry, there are no tasks available right now. Please check back later."}),u==="watchcode"?e.jsx(A,{videoId:w,isOpen:j,onClose:f}):u==="wordoccurrence"?e.jsx(V,{videoId:w,isOpen:j,onClose:f}):""]})};export{ae as default};
