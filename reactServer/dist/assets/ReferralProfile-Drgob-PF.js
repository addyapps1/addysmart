import{r as a,A as G,u as Y,c as O,j as e}from"./index-CxbHE0pI.js";import{M as H}from"./AddyMine-WSYQUIhP.js";import{M as W}from"./MineHelmet-CPD-h0TO.js";import{S as J}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{B as K}from"./BeatLoader-Pg87K8qw.js";import"./useClickOutside-B_P1bOg4.js";import"./Helmet-CSCbi4JC.js";const x=new Date,X=x.getFullYear(),Z=x.getMonth()+1,ee=x.getDate();let d=+`${X}${Z}${ee}`;const oe=()=>{var N,T,v,y,S,M,R,B,C,D;console.log("cookies",document.cookie);const{logout:U,isLoggedIn:f,getStoredUserObj:m,getStoredToken:h,setPageTitle:g,APP_NAME:u}=a.useContext(G),{API_MineBase_url:$,API_AuthBase_url:L,viewingReferral:s}=a.useContext(H),[j,b]=a.useState(!1),n=a.useRef(!0),[P,k]=a.useState(0),[c,A]=a.useState(0),o=Y();a.useEffect(()=>{f()||o("/"),s._id||o("../referrals")},[f,o]),a.useEffect(()=>(g("REF STATS"),()=>{}),[g]);const[r,I]=a.useState({}),[_,V]=a.useState({});a.useEffect(()=>{V(m())},[m]);const{_id:F}=O();console.log("_id",F),console.log("viewingReferral",s),console.log("viewingReferral?.referred?.userTitle?.toUpperCase()",(T=(N=s==null?void 0:s.referred)==null?void 0:N.userTitle)==null?void 0:T.toUpperCase());const Q=async()=>{console.log("URL2 bbb"),b(!0);try{let t=`${$()}api/a/v1.00/balance/myrefbalance/${s._id}`,E=`${L()}api/a/v1.00/referraltask/myrefreferraltask/${s._id}`;console.log("URL1 ",t),console.log("URL2 ",E);const[q,z]=await Promise.all([fetch(t,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",authorization:`Bearer ${h()}`}}),fetch(E,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",authorization:`Bearer ${h()}`}})]),l=await q.json(),i=await z.json();if(l.status==="success"&&l.data)console.log("balanceData.data",l.data),console.log("numberedDay",d),console.log("balanceData.data.Day",l.data.Day),console.log("numberedDay === balance.Day",d===l.data.Day),n.current=d===l.data.Day,console.log("balanceData.data",l.data),I(l.data);else throw new Error(l.message);if(i.status==="success"&&i.data)k(i.data.totalReferrals||0),A(i.data.qaulifiedReferrals||0),console.log("referralData.data.totalReferrals",i.data.totalReferrals);else throw new Error(i.message)}catch(t){(t=="Error: jwt expired"||t=="Error: Device mismatch. Please login again")&&(J.fire("Your login expired, please login again."),U(),o("/")),console.error("Request failed:",t)}finally{b(!1)}};let p=a.useRef();p.current=Q;const w=a.useRef(!0);return a.useEffect(()=>{if(w.current){w.current=!1;return}console.log("USE EFFECT RAN"),p.current()},[_]),e.jsxs(e.Fragment,{children:[e.jsx(W,{pageDescription:`Welcome to ${u.toLowerCase()} mining dashboard page where you see all your mining data`,pageName:"addymine",pageTitle:`${u}- Mining dashboard`}),e.jsx("section",{className:"flex justify-center items-center mx-6 mb-6 mt-10",children:e.jsx("div",{className:"cards-container flex max-w-[850px] flex-wrap w-full justify-center gap-6",children:e.jsxs("div",{className:"bg-[var(--container-bg-color)] w-full px-4 flex-grow min-h-16 flex-col flex justify-center items-center rounded-md",children:[e.jsx("h1",{className:"w-full text-center mt-5 m-0 text-[var(--highlight-color)] text-2xl",children:`${((y=(v=s==null?void 0:s.referred)==null?void 0:v.userTitle)==null?void 0:y.toUpperCase())||""} 
              ${((M=(S=s==null?void 0:s.referred)==null?void 0:S.firstName)==null?void 0:M.toUpperCase())||""} 
              ${((B=(R=s==null?void 0:s.referred)==null?void 0:R.middleName)==null?void 0:B.toUpperCase())||""} 
              ${((D=(C=s==null?void 0:s.referred)==null?void 0:C.lastName)==null?void 0:D.toUpperCase())||""}`}),e.jsxs("p",{className:" w-full text-center mb-2 px-3",children:["Stats for the month"," "]})]})})}),j&&e.jsx("div",{className:"flex justify-center items-center my-10",children:e.jsx(K,{color:"#ffffff",loading:j,size:8})}),e.jsx("section",{className:"flex justify-center items-center mx-6 mb-14",children:e.jsxs("div",{className:"cards-container flex max-w-[850px] flex-wrap w-full justify-center gap-6",children:[e.jsxs("div",{className:"basis-80 flex-grow flex gap-6 justify-center flex-wrap",children:[e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TQR:",e.jsx("p",{className:"text-[var(--highlight-color)]",title:"Referrals who have completed the minimun 5 referal task",children:e.jsxs("b",{className:c>=10?"text-[var(--good)]":"text-[var(--bad)]",children:[" ",c||0]})})]}),e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["Referrals:",e.jsx("p",{className:"text-[var(--highlight-color)]",children:e.jsx("b",{children:P||0})})]})]}),e.jsxs("div",{className:"basis-80 flex-grow flex gap-6 justify-center flex-wrap",children:[e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["VIPB:",e.jsx("p",{className:"text-[var(--highlight-color)]",children:r.monthsVIPbonus||0})]}),e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TMRS:",e.jsx("p",{className:"text-[var(--highlight-color)]",children:r.TotalMainCoins+r.TotalBonusCoins||0})]})]}),e.jsxs("div",{className:"basis-80 flex-grow flex gap-6 justify-center flex-wrap",children:[e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TMLB:",e.jsx("p",{children:e.jsxs("b",{className:c<=50?"text-[var(--good)]":"text-[var(--bad)]",children:[" ",r.TotalLostBonus||0]})})]}),e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TMRBS:",e.jsx("p",{className:"text-[var(--highlight-color)]",children:r.TotalBonusCoins||0})]})]}),e.jsxs("div",{className:"basis-80 flex-grow flex gap-6 justify-center flex-wrap",children:[e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TMSM:",e.jsx("p",{className:"text-[var(--highlight-color)]",children:r.TotalMainCoins||0})]}),e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TMCT:",e.jsx("p",{className:"text-[var(--highlight-color)]",children:r.TotalTaskCompleted||0})]})]}),e.jsxs("div",{className:"basis-80 flex-grow flex gap-6 justify-center flex-wrap",children:[e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TCT:",e.jsx("p",{className:r.dailyTaskCompleted>9?"text-[var(--good)]":"text-[var(--bad)]",children:n.current&&r.dailyTaskCompleted||0})]}),e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TRBS:",e.jsx("p",{className:"text-[var(--highlight-color)]",children:n.current&&r.dailyBonusCoins||0})]})]}),e.jsxs("div",{className:"basis-80 flex-grow flex gap-6 justify-center flex-wrap",children:[e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TSM:",e.jsx("p",{className:"text-[var(--highlight-color)]",children:n.current&&r.dailyMainCoins||0})]}),e.jsxs("div",{className:"bg-[var(--container-bg-color)] basis-28 flex-grow min-h-16 flex flex-col justify-center items-center rounded-md",children:["TRS:",e.jsx("p",{className:"text-[var(--highlight-color)]",children:n.current&&r.dailyMainCoins+r.dailyBonusCoins||0})]})]})]})}),e.jsx("section",{className:"flex justify-center items-center mx-6 mb-14",children:e.jsx("div",{className:"cards-container max-w-[850px] flex-wrap w-full justify-center",children:e.jsxs("div",{className:"bg-[var(--container-bg-color)] flex-col flex-grow min-h-16 flex justify-center items-center rounded-md pt-4 ",children:[e.jsx("h3",{className:"w-full text-center text-[var(--highlight-color)]",children:"ABBREVIATION MEANINGS"}),e.jsxs("div",{className:"w-full flex justify-center items-center flex-wrap",children:[e.jsxs("div",{className:"basis-56 flex flex-grow flex-wrap",children:[e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"SSTBV:"})," Staged Shares To Be Valued (TMRS for last month waiting to be valued)"]}),e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TMRBS:"})," This Month’s Referral Bonus Shares (sums all referral bonuses)"]})]}),e.jsxs("div",{className:"basis-56 flex flex-grow flex-wrap",children:[e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TMSM:"})," This Month’s Shares Minings"]}),e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TMRS:"})," This Month’s Running Shares (TMRS=TMSM+TMRBS)"]})]})]}),e.jsxs("div",{className:"w-full flex justify-center items-center flex-wrap",children:[e.jsxs("div",{className:"basis-56 flex flex-grow flex-wrap",children:[e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TCT:"})," Tasks completed today (minimum 10 tasks daily or lose bonus for the day)"]}),e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TRBS:"})," Today’s Referral Bonus Shares (sums all referral bonuses)"]})]}),e.jsxs("div",{className:"basis-56 flex flex-grow flex-wrap",children:[e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TSM:"})," Today’s Shares Minings"]}),e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TRS:"})," Today’s Running Shares (TRS=TSM+TRBS)"]})]})]}),e.jsxs("div",{className:"w-full flex justify-center items-center flex-wrap",children:[e.jsxs("div",{className:"basis-56 flex flex-grow flex-wrap",children:[e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TQR:"})," Total Qualified Referrals (minimum 10 needed to become a VIP partner)"]}),e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"VIPB:"})," VIP Bonus shares (extra 10% bonus of staged shares)"]})]}),e.jsxs("div",{className:"basis-56 flex flex-grow flex-wrap",children:[e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TMCT:"})," This Month’s Completed Tasks"]}),e.jsxs("p",{className:"basis-28 flex-grow m-5",children:[e.jsx("b",{children:"TMLB:"})," This Month’s Lost Bonuses"]})]})]})]})})})]})};export{oe as default};
