import{r as t,A as S,u as E,j as e}from"./index-DWis4S1t.js";import{M as I}from"./AddyMine-CwKyk6rd.js";import{T as M,W as U}from"./WatchcodeModal-Ch7SbnCH.js";import{S as _}from"./sweetalert2.esm.all-BGf-Fe8G.js";import"./BeatLoader-CfJHUm3g.js";const W=()=>{var u,x,h;const{isLoggedIn:r,getStoredUserObj:l,getStoredToken:p,setPageTitle:n}=t.useContext(S),{API_E_VideoBase_url:g,tasks:j,setTasks:w,balance:D,setBalance:L}=t.useContext(I),[O,c]=t.useState(!1),[o,v]=t.useState({}),[y,i]=t.useState(null),[N,d]=t.useState(!1),m=E();t.useEffect(()=>{r()||m("/")},[r,m]),t.useEffect(()=>(n("TASKS"),()=>{}),[n]),t.useEffect(()=>{v(l())},[l]);const f=async()=>{c(!0);try{const s=`${g}api/a/v1.00/evideo/tasks`,a=await(await fetch(s,{method:"GET",headers:{"Content-Type":"application/json",authorization:`Bearer ${p()}`}})).json();if(a.status==="success"&&a.data)console.log("tasksData.data",a.data),w(a.data);else throw new Error(a.message)}catch(s){console.error("Request failed:",s)}finally{c(!1)}};t.useEffect(()=>{f()},[]);const k=s=>{i(s),d(!0),console.log("setIsModalOpen(true);",s)},b=()=>{d(!1),i(null)},T=s=>{s.preventDefault(),_.fire("Sorry, you have already completed this task within the last 24 hours.")},C=s=>{f()};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"flex justify-center items-center mx-6 mb-6 mt-10",children:e.jsx("div",{className:"cards-container flex max-w-[850px] flex-wrap w-full justify-center gap-6",children:e.jsxs("div",{className:"bg-[var(--container-bg-color)] w-full flex-grow min-h-16 flex-col flex justify-center items-center rounded-md",children:[e.jsxs("h1",{className:"w-full text-center mt-5 m-0 text-[var(--highlight-color)] text-2xl",children:[`${((u=o.userTitle)==null?void 0:u.toUpperCase())||"ff"} 
              ${((x=o.firstName)==null?void 0:x.toUpperCase())||"ff"} 
              ${((h=o.lastName)==null?void 0:h.toUpperCase())||"ff"}`,o.isVIP&&e.jsx("em",{className:"text-[var(--good)]",children:" (VIP)"})]}),e.jsx("p",{className:"w-full text-center m-2",children:e.jsx("b",{onClick:C,className:"bg-[var(--accent-color)] p-1 px-2 rounded",children:"Reload Task"})})]})})}),e.jsx("section",{className:"flex justify-center items-center mx-6 mb-14 mt-2",children:e.jsx("div",{className:"cards-container flex max-w-[850px] flex-wrap w-full justify-center gap-6",children:e.jsxs("div",{className:"bg-[var(--container-bg-color)] w-full flex-grow min-h-16 flex-col flex justify-center items-center rounded-md",children:[e.jsx("em",{className:"w-full text-left mt-5 m-0 p-4 text-[var(--highlight-color)] text-2xl",children:"Don’t forget to subscribe or follow, like, and share this video! Your engagement helps the algorithm recommend and show this video to more people, increasing the monetary value of our shares. The more people outside our community see this video, the more money we make together. Let’s spread the word and grow our success!"}),e.jsx("p",{className:"w-full text-center mb-2"})]})})}),j.map(s=>(console.log("task.videoId ",s._id),e.jsx("div",{className:"task-item",children:e.jsx(M,{task:s,alertViewed:T,onWatchCodeClick:()=>k(s._id)})},s._id))),e.jsx(U,{videoId:y,isOpen:N,onClose:b})]})};export{W as default};
