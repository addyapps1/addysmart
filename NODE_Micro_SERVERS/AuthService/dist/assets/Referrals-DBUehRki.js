import{r as t,A as y,u as T,j as s}from"./index-DWis4S1t.js";import{M as I}from"./AddyMine-CwKyk6rd.js";import{T as R,W as S}from"./WatchcodeModal-Ch7SbnCH.js";import"./sweetalert2.esm.all-BGf-Fe8G.js";import"./BeatLoader-CfJHUm3g.js";const W=()=>{var m,u,p;const{isLoggedIn:r,getStoredUserObj:n,getStoredToken:x,setPageTitle:i}=t.useContext(y),{API_MineBase_url:h,tasks:g,setTasks:j,balance:U,setBalance:b}=t.useContext(I),[L,l]=t.useState(!1),[o,v]=t.useState({}),[w,c]=t.useState(null),[C,d]=t.useState(!1),f=T();t.useEffect(()=>{r()||f("/")},[r,f]),t.useEffect(()=>(i("REFERRALS"),()=>{}),[i]),t.useEffect(()=>{v(n())},[n]);const E=async()=>{l(!0);try{const e=`${h}api/a/v1.00/evideo/tasks`,a=await(await fetch(e,{method:"GET",headers:{"Content-Type":"application/json",authorization:`Bearer ${x()}`}})).json();if(a.status==="success"&&a.data)j(a.data);else throw new Error(a.message)}catch(e){console.error("Request failed:",e)}finally{l(!1)}};t.useEffect(()=>{E()},[]);const M=e=>{c(e),d(!0)},N=()=>{d(!1),c(null)};return s.jsxs(s.Fragment,{children:[s.jsx("section",{className:"flex justify-center items-center mx-6 mb-6 mt-10",children:s.jsx("div",{className:"cards-container flex max-w-[850px] flex-wrap w-full justify-center gap-6",children:s.jsxs("div",{className:"bg-[var(--container-bg-color)] w-full flex-grow min-h-16 flex-col flex justify-center items-center rounded-md",children:[s.jsx("h1",{className:"w-full text-center mt-5 m-0 text-[var(--highlight-color)] text-2xl",children:`${((m=o.userTitle)==null?void 0:m.toUpperCase())||"ff"} 
              ${((u=o.firstName)==null?void 0:u.toUpperCase())||"ff"} 
              ${((p=o.lastName)==null?void 0:p.toUpperCase())||"ff"}`}),s.jsxs("p",{className:"w-full text-center mb-2",children:["Mine real shares and get paid every month"," "]})]})})}),g.map(e=>s.jsx("div",{className:"task-item",children:s.jsx(R,{title:e.title,description:e.description,image:e.image,onWatchCodeClick:()=>M(e.videoId)})},e._id)),s.jsx(S,{videoId:w,isOpen:C,onClose:N})]})};export{W as default};
