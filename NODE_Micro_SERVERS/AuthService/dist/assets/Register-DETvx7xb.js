import{r as s,A as j,u as k,j as e,L as P}from"./index-DWis4S1t.js";import{B as C}from"./BeatLoader-CfJHUm3g.js";const R=()=>{const{API_base_url:g,StoreToken:b,StoreUserObj:v,getReferalId:n,setPageTitle:i}=s.useContext(j);s.useEffect(()=>(i(""),()=>{}),[i]);const c=k(),[m,p]=s.useState(""),[u,d]=s.useState(!1),[r,h]=s.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",gender:"",referredByRef:""}),o=t=>{h({...r,[t.target.name]:t.target.value})},y=()=>{console.log("formData",r),n()&&h({...r,referredByRef:n()});const{firstName:t,lastName:l,email:a,password:f,confirmPassword:x,gender:N}=r;return!t||!l||!a||!f||!x||!N?(p("Please fill in all required fields"),alert("Please fill in all required fields."),!1):f!==x?(alert("Passwords do not match."),!1):!0},w=async t=>{if(t.preventDefault(),d(!0),!y()){d(!1);return}console.log("formData",r);try{const a=await(await fetch(`${g}api/a/v1.00/users/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();console.log(a),console.log(a.token),a.token&&b(a.token),a.data&&v(a.data),alert("Registration successful, you have been successfully logged in and will be redirected to the home page"),console.log("data",a),a.data.role.includes("user")?c("/home"):c("/")}catch(l){console.error("Registration failed:",l)}d(!1)};return e.jsxs("div",{className:"container my-8 mx-auto max-w-md p-6 bg-[var(--container-bg-color)] border border-[var(--container-border)] rounded-lg shadow-lg",children:[e.jsx("div",{className:"formHeader mb-6 rounded-md",children:e.jsx("h1",{className:"text-2xl font-bold text-[var(--primary-text-color)] text-center",children:"Register"})}),e.jsxs("form",{children:[m&&e.jsx("div",{className:"error-message",children:m}),e.jsx("label",{className:"block mb-2 text-[var(--primary-text-color)] font-bold",htmlFor:"firstName",children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",value:r.firstName,onChange:o,required:!0,id:"firstName",className:"mb-4 p-2 w-full border rounded text-[var(--secondary-text-color)] border-[var(--dark-gray)] focus:border-[var(--highlight-color)] focus:shadow-md"}),e.jsx("label",{className:"block mb-2 text-[var(--primary-text-color)] font-bold",htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:r.lastName,onChange:o,required:!0,id:"lastName",className:"mb-4 p-2 w-full border rounded text-[var(--secondary-text-color)] border-[var(--dark-gray)] focus:border-[var(--highlight-color)] focus:shadow-md"}),e.jsx("label",{className:"block mb-2 text-[var(--primary-text-color)] font-bold",htmlFor:"userTitle",children:"Your Title ( If any )"}),e.jsx("input",{type:"text",name:"userTitle",value:r.userTitle,onChange:o,required:!0,id:"userTitle",className:"mb-4 p-2 w-full border rounded text-[var(--secondary-text-color)] border-[var(--dark-gray)] focus:border-[var(--highlight-color)] focus:shadow-md"}),e.jsx("label",{className:"block mb-2 text-[var(--primary-text-color)] font-bold",htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:o,required:!0,id:"email",className:"mb-4 p-2 w-full border rounded text-[var(--secondary-text-color)] border-[var(--dark-gray)] focus:border-[var(--highlight-color)] focus:shadow-md"}),e.jsx("label",{className:"block mb-2 text-[var(--primary-text-color)] font-bold",htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:r.password,onChange:o,required:!0,id:"password",className:"mb-4 p-2 w-full border rounded text-[var(--secondary-text-color)] border-[var(--dark-gray)] focus:border-[var(--highlight-color)] focus:shadow-md"}),e.jsx("label",{className:"block mb-2 text-[var(--primary-text-color)] font-bold",htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:o,required:!0,id:"confirmPassword",className:"mb-4 p-2 w-full border rounded text-[var(--secondary-text-color)] border-[var(--dark-gray)] focus:border-[var(--highlight-color)] focus:shadow-md"}),e.jsx("label",{className:"block mb-2 text-[var(--primary-text-color)] font-bold",htmlFor:"gender",children:"Gender:"}),e.jsxs("select",{name:"gender",value:r.gender,onChange:o,required:!0,id:"gender",className:"mb-4 p-2 w-full border rounded text-[var(--secondary-text-color)] border-[var(--dark-gray)] focus:border-[var(--highlight-color)] focus:shadow-md",children:[e.jsx("option",{value:"",children:"-- Select Gender --"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsx("button",{onClick:w,type:"submit",className:"w-full mt-7 py-2 bg-[var(--highlight-color)] text-white rounded hover:bg-[var(--secondary-accent-color)] transition duration-300",children:u?e.jsx(C,{color:"#ffffff",loading:u,size:8}):"Register"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(P,{to:"/login",className:"text-[var(--accent-color)] hover:text-[var(--highlight-color)]",children:"Back to Login"})})]})};export{R as default};
