import{r as t,A as y,u as T,j as s}from"./index-DWis4S1t.js";import{M as A}from"./AddyMine-CwKyk6rd.js";import{T as I,W as U}from"./WatchcodeModal-Ch7SbnCH.js";import"./sweetalert2.esm.all-BGf-Fe8G.js";import"./BeatLoader-CfJHUm3g.js";const W=()=>{var m,u,p;const{isLoggedIn:n,getStoredUserObj:r,getStoredToken:x,setPageTitle:i}=t.useContext(y),{API_MineBase_url:h,tasks:g,setTasks:j,balance:b,setBalance:S}=t.useContext(A),[B,c]=t.useState(!1),[o,v]=t.useState({}),[C,l]=t.useState(null),[M,d]=t.useState(!1),f=T();t.useEffect(()=>{n()||f("/")},[n,f]),t.useEffect(()=>(i("MAMAGEBALANCE"),()=>{}),[i]),t.useEffect(()=>{v(r())},[r]);const w=async()=>{c(!0);try{const e=`${h}api/a/v1.00/evideo/tasks`,a=await(await fetch(e,{method:"GET",headers:{"Content-Type":"application/json",authorization:`Bearer ${x()}`}})).json();if(a.status==="success"&&a.data)j(a.data);else throw new Error(a.message)}catch(e){console.error("Request failed:",e)}finally{c(!1)}};t.useEffect(()=>{w()},[]);const E=e=>{l(e),d(!0)},N=()=>{d(!1),l(null)};return s.jsxs(s.Fragment,{children:[s.jsx("section",{className:"flex justify-center items-center mx-6 mb-6 mt-10",children:s.jsx("div",{className:"cards-container flex max-w-[850px] flex-wrap w-full justify-center gap-6",children:s.jsxs("div",{className:"bg-[var(--container-bg-color)] w-full flex-grow min-h-16 flex-col flex justify-center items-center rounded-md",children:[s.jsx("h1",{className:"w-full text-center mt-5 m-0 text-[var(--highlight-color)] text-2xl",children:`${((m=o.userTitle)==null?void 0:m.toUpperCase())||"ff"} 
              ${((u=o.firstName)==null?void 0:u.toUpperCase())||"ff"} 
              ${((p=o.lastName)==null?void 0:p.toUpperCase())||"ff"}`}),s.jsxs("p",{className:"w-full text-center mb-2",children:["Mine real shares and get paid every month"," "]})]})})}),g.map(e=>s.jsx("div",{className:"task-item",children:s.jsx(I,{title:e.title,description:e.description,image:e.image,onWatchCodeClick:()=>E(e.videoId)})},e._id)),s.jsx(U,{videoId:C,isOpen:M,onClose:N})]})};export{W as default};
